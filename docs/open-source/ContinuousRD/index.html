<!DOCTYPE html><html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <title>Kyle Butts</title>
  <meta name="description" content="Academic site for Kyle Butts.">
  <!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=326374528"></script>
<script>let id = 326374528;

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', id);
</script>

<link rel="stylesheet" href="/assets/f1a26159.8a3e8e58.css" />
<link rel="stylesheet" href="/assets/087686f5.906370df.css" /><script type="module">var n=function(){var e=document.createElement("link");e.rel="stylesheet",e.crossOrigin="anonymous",e.href="https://cdn.jsdelivr.net/npm/katex@0.15.0/dist/katex.min.css";var t=document.getElementsByTagName("head")[0];t.parentNode.insertBefore(e,t)},a=requestAnimationFrame||mozRequestAnimationFrame||webkitRequestAnimationFrame||msRequestAnimationFrame;a?a(n):window.addEventListener("load",n);
</script></head>

<body>
  <!-- Set theme on body -->
  <!-- Dark Mode --><script>
  // Check for dark mode preference at the OS level
  const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");

  // Get the user's theme preference from local storage, if it's available
  let currentTheme = localStorage.getItem("theme");

  // Defaults
  if(currentTheme == null) {
    if(prefersDarkScheme.matches) {
      localStorage.setItem("theme", "dark")
      currentTheme = "dark"
    } else {
      localStorage.setItem("theme", "light")
      currentTheme = "light"
    }
  } 
  
  if (currentTheme == "dark") {
    document.body.classList.add("dark");
  } 
</script>


  <div class="min-h-screen w-full bg-mine-shaft-100 font-jetbrains text-mine-shaft-900 dark:bg-mine-shaft-900 dark:text-mine-shaft-50">
    <div class="pt-size-xs prose:pt-size-sm-md pb-size-2xl">
      <div class="content   
  ">
  <nav class="flex w-full flex-col justify-between gap-size-2xs pb-size-2xs border-b-[1px] border-mine-shaft-800 dark:border-mine-shaft-100">
  <div class="flex flex-wrap items-center justify-between">
    <h1 class="text-size-1 font-bold tracking-tight">
      <a href="/">Kyle Butts</a>
    </h1>

    <div class="flex items-center gap-size-2xs-xs">
      <a href="mailto:buttskyle96@gmail.com" aria-label="Send an email to Kyle Butts">
  <svg viewBox="0 0 24 24" class="block h-5 w-5 prose:h-6 prose:w-6 lg:h-7 lg:w-7 text-kelly-400 dark:text-kelly-500 cursor-pointer" astro-icon="heroicons-outline:at-symbol"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 1 0-8 0 4 4 0 0 0 8 0zm0 0v1.5a2.5 2.5 0 0 0 5 0V12a9 9 0 1 0-9 9m4.5-1.206a8.959 8.959 0 0 1-4.5 1.207"/></svg>
</a>

<a href="https://twitter.com/kylebutts/" aria-label="Kyle Butts' Twitter Account">
  <svg viewBox="0 0 256 256" class="block h-5 w-5 prose:h-6 prose:w-6 lg:h-7 lg:w-7 text-kelly-400 dark:text-kelly-500 cursor-pointer" astro-icon="ph:twitter-logo-duotone"><path fill="currentColor" d="m240 72-32.3 32.3A127.9 127.9 0 0 1 80 224c-32 0-40-12-40-12s32-12 48-36c0 0-64-32-48-120 0 0 40 40 88 48V88c0-22 18.5-40.3 40.5-40a40 40 0 0 1 36.2 24z" opacity=".2"/><path fill="currentColor" d="M247.4 68.9A8 8 0 0 0 240 64h-30.4a48.2 48.2 0 0 0-41-24A48.3 48.3 0 0 0 120 88v6.1C79.3 83.5 46 50.7 45.7 50.3a8 8 0 0 0-8.1-1.9 8.1 8.1 0 0 0-5.5 6.2c-8.7 48.2 5.8 80.5 19.5 99.1a108.6 108.6 0 0 0 24.7 24.4c-15.3 17.3-38.9 26.3-39.1 26.4a8 8 0 0 0-3.9 11.9c.8 1.2 3.8 5.1 11.1 8.8 9.1 4.5 21.1 6.8 35.6 6.8 70.5 0 129.5-54.3 135.5-124.2l30.2-30.1a8.4 8.4 0 0 0 1.7-8.8zm-45.3 29.7a7.8 7.8 0 0 0-2.3 5.2C195.7 166.7 143.1 216 80 216c-10.6 0-18-1.4-23.2-3.1 11.5-6.2 27.5-17 37.9-32.5a8 8 0 0 0 1-6.4 8.1 8.1 0 0 0-4.1-5.1c-.1-.1-14.9-7.8-27.6-25.3-14.4-19.8-20.5-43.9-18.1-71.7 15.8 13 46 34.2 80.8 40a8.1 8.1 0 0 0 6.5-1.8 8.2 8.2 0 0 0 2.8-6.1V88a32 32 0 0 1 61.3-12.8 8.1 8.1 0 0 0 7.4 4.8h16z"/></svg>
</a>

<a href="https://github.com/kylebutts/" aria-label="Kyle Butts' Github Account">
  <svg viewBox="0 0 24 24" class="block h-5 w-5 prose:h-6 prose:w-6 lg:h-7 lg:w-7 text-kelly-400 dark:text-kelly-500 cursor-pointer astro-L2AK7BS3" astro-icon="line-md:github-twotone">
    <g fill="none">
      <path fill="currentColor" fill-opacity=".3" d="M15 4.5c-.388-.1-1.332-.5-3-.5s-2.612.4-3 .5C8.475 4.075 7.062 3 5.5 3c-.344 1-.286 2.22 0 3-.75 1-1 2-1 3.5 0 2.188.483 3.582 1.5 4.5 1.017.918 2.111 1.375 3.5 1.5-.65.538-.5 1.874-.5 2.5v4h6v-4c0-.626.15-1.962-.5-2.5 1.389-.125 2.483-.582 3.5-1.5s1.5-2.313 1.5-4.5c0-1.5-.25-2.5-1-3.5.286-.78.344-2 0-3-1.563 0-2.975 1.075-3.5 1.5z" class="il-md-fill il-md-duration-0 il-md-delay-5"></path>
      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4c1.668 0 2.612.4 3 .5.525-.425 1.938-1.5 3.5-1.5.344 1 .286 2.22 0 3 .75 1 1 2 1 3.5 0 2.188-.483 3.582-1.5 4.5-1.017.918-2.111 1.375-3.5 1.5.65.538.5 1.874.5 2.5v3M12 4c-1.668 0-2.612.4-3 .5C8.475 4.075 7.062 3 5.5 3c-.344 1-.286 2.22 0 3-.75 1-1 2-1 3.5 0 2.188.483 3.582 1.5 4.5 1.017.918 2.111 1.375 3.5 1.5-.65.538-.5 1.874-.5 2.5v3" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path>
      <path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M9 19c-1.406 0-2.844-.563-3.688-1.188C4.47 17.188 4.22 16.157 3 15.5" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path>
    </g>
  </svg>
</a>
      <script>
  toggleDarkMode = () => {
    // Get the user's theme preference from local storage, if it's available
    let currentTheme = localStorage.getItem("theme");

    // Defaults
    if (currentTheme == "light") {
      localStorage.setItem("theme", "dark")
      document.body.classList.add("dark")
    } else {
      localStorage.setItem("theme", "light")

      document.body.classList.remove("dark")
    }
  }
</script>

<button aria-label="Dark Mode Toggle" onclick="toggleDarkMode()">
  <svg viewBox="0 0 24 24" class="hidden dark:block h-5 w-5 prose:h-6 prose:w-6 lg:h-7 lg:w-7 text-kelly-400 dark:text-kelly-500 cursor-pointer" astro-icon="ic:twotone-wb-sunny"><path fill="currentColor" d="M12 7.5c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z" opacity=".3"/><path fill="currentColor" d="m5.34 6.25 1.42-1.41-1.8-1.79-1.41 1.41zM1 10.5h3v2H1zM11 .55h2V3.5h-2zm7.66 5.705-1.41-1.407 1.79-1.79 1.406 1.41zM17.24 18.16l1.79 1.8 1.41-1.41-1.8-1.79zM20 10.5h3v2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-1 4h2v2.95h-2zm-7.45-.96 1.41 1.41 1.79-1.8-1.41-1.41z"/></svg>
  <svg viewBox="0 0 24 24" class="block dark:hidden h-5 w-5 prose:h-6 prose:w-6 lg:h-7 lg:w-7 text-kelly-400 dark:text-kelly-500 cursor-pointer" astro-icon="ic:twotone-dark-mode"><path fill="currentColor" d="M9.37 5.51A7.35 7.35 0 0 0 9.1 7.5c0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27A7.014 7.014 0 0 1 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49z" opacity=".3"/><path fill="currentColor" d="M9.37 5.51A7.35 7.35 0 0 0 9.1 7.5c0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27A7.014 7.014 0 0 1 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49zM12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"/></svg>
</button>
    </div>
  </div>

  <ul class="gap-size-xs-sm flex flex-wrap text-size-0 font-light">
  <li class="relative hover:underline focus:underline decoration-alice-400">
    <a href="/papers/">Papers</a>
  </li><li class="relative hover:underline focus:underline decoration-alice-400">
    <a href="/open-source/">Open Source</a>
  </li><li class="relative hover:underline focus:underline decoration-alice-400">
    <a href="/teaching/">Teaching</a>
  </li><li class="relative hover:underline focus:underline decoration-alice-400">
    <a href="/blog/">Blog</a>
  </li>
</ul>
</nav>
</div>
        
      <div class="content flow prose 
  ">
  <h1 id="continuousrd"><a href="https://github.com/kylebutts/ContinuousRD">ContinuousRD</a></h1>
<p>ContinuousRD is a package that implements regression discontinuity
designs when the treatment variable is continuous following <a href="http://www.yingyingdong.com/Research/RD_ContinuousTreatment.pdf">Dong, Lee,
and Gou
(2022)</a></p>
<h2 id="installation">Installation</h2>
<p>You can install the development version of ContinuousRD from
<a href="https://github.com/">GitHub</a> with:</p>
<pre class="shiki github-dark" style="background-color:#0d1117;color:#c9d1d9"><div class="language-id">r</div><div class="code-container"><code><div class="line"><span style="color:#8B949E"># install.packages(&quot;devtools&quot;)</span></div><div class="line"><span style="color:#79C0FF">devtools</span><span style="color:#FF7B72">::</span><span style="color:#FFA657">install_github</span><span style="color:#C9D1D9">(</span><span style="color:#A5D6FF">&quot;kylebutts/ContinuousRD&quot;</span><span style="color:#C9D1D9">)</span></div></code></div></pre>
<h2 id="setting">Setting</h2>
<p>I will provide a quick (and simplified) overview of the methods from
<a href="http://www.yingyingdong.com/Research/RD_ContinuousTreatment.pdf">Dong, Lee, and Gou
(2022)</a>.
For the full details, please see the original text. I’m purposefully
leaving out details since hopefully you are here <em>after</em> reading the
paper :-)</p>
<p>Let <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span></span></span></span></span> denote the outcome variable and <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span> a continuous variable of
interest. There exists a running variable <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.00773em">R</span></span></span></span></span> and a cutoff <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">c</span></span></span></span></span> (which
we’ll normalize to zero) that affects the treatment <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span>. The paper
assumes that different quantiles of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span> are differentially affected by
the discontinuity.</p>
<p>For example, in the paper they discuss a minimum capital requirement for
banks in cities with population over 3,000 in 1900. The running variable
would be population and the treatment variable is banking capital.
Clearly, only banks with counterfactual banking capital below the
threshold are affected by the population cutoff. Therefore the jump in
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span> will be zero for most banks, but positive for banks at the lower end
of the counterfactual distribution of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span>.</p>
<p>For this reason, the estimator proposed in the paper wants to estimate
the LATE at different quantiles of the distribution of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span>, which they
denote as the Quantile-LATE or QLATE for short. The method proceeds as
follows.</p>
<p>For a given quantile of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span>, denoted <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>∈</mo><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">u \in (0,1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>, estimate the
“first-stage” RD of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span>. Define <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>q</mi><mo>+</mo></msup><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q^+(u)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0213em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span></span></span></span></span> be the <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>u</mi><mrow><mi>t</mi><mi>h</mi></mrow></msup></mrow><annotation encoding="application/x-tex">u^{th}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span></span> percentile of
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span> under treatment at <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">R = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span></span> and <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>q</mi><mo>−</mo></msup><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q^-(u)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0213em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span></span></span></span></span> be the <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>u</mi><mrow><mi>t</mi><mi>h</mi></mrow></msup></mrow><annotation encoding="application/x-tex">u^{th}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span></span> percentile
of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span> under no treatment at <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">R = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span></span>. The RD estimate of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span> would
therefore estimate This will estimate
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">E</mi><mo stretchy="false">[</mo><msup><mi>q</mi><mo>+</mo></msup><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo><mo>−</mo><msup><mi>q</mi><mo>−</mo></msup><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><mi>U</mi><mo>=</mo><mi>u</mi><mo separator="true">,</mo><mi>R</mi><mo>=</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\mathbb{E}[ q^+(u) - q^-(u) \vert U = u, R = 0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0213em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0213em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">0</span><span class="mclose">]</span></span></span></span></span>. Intuitively, this
gives the jump in the continuous treatment for units at the <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>u</mi><mrow><mi>t</mi><mi>h</mi></mrow></msup></mrow><annotation encoding="application/x-tex">u^{th}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span></span>
percentile of the distribution.</p>
<p>Then, the reduced form involves running an RD of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span></span></span></span></span> using observations
to the right of the cutoff with values of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span> near <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T_1(u)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span></span></span></span></span> and to the
left of the cutoff with values of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span> near <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T_0(u)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span></span></span></span></span>. The left and right
limits in the RD would respectively identify</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>m</mi><mo>−</mo></msup><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">[</mo><mi>Y</mi><mi mathvariant="normal">∣</mi><mi>T</mi><mo>=</mo><msup><mi>q</mi><mo>−</mo></msup><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>R</mi><mo>=</mo><mn>0</mn><mo stretchy="false">]</mo><mtext> and </mtext><msup><mi>m</mi><mo>+</mo></msup><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">[</mo><mi>Y</mi><mi mathvariant="normal">∣</mi><mi>T</mi><mo>=</mo><msup><mi>q</mi><mo>+</mo></msup><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>R</mi><mo>=</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">m^-(u) = \mathbb{E}[ Y | T = q^-(u), R = 0] \text{ and } m^+(u) = \mathbb{E}[ Y | T = q^+(u), R = 0] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0713em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8213em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.0713em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8213em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.0713em;vertical-align:-0.25em"></span><span class="mord">0</span><span class="mclose">]</span><span class="mord text"><span class="mord"> and </span></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8213em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.0713em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8213em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">0</span><span class="mclose">]</span></span></span></span></span></div>
<p>The difference between these two terms would estimate the jump in <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span></span></span></span></span>
for units near the <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>u</mi><mrow><mi>t</mi><mi>h</mi></mrow></msup></mrow><annotation encoding="application/x-tex">u^{th}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span></span> percentile of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span>. The QLATE estimate will
then be the ratio of these two quantities. Intuitively it’s the jump in
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span></span></span></span></span> rescaled by the jump in <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span>. Note that only quantiles that have a
significant jump <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>q</mi><mo>+</mo></msup><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo><mo>−</mo><msup><mi>q</mi><mo>−</mo></msup><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo><mo mathvariant="normal">≠</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">q^+(u) - q^-(u) \neq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0213em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0213em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span></span> are used to form estimates
(since otherwise the denominator is 0).</p>
<img src="https://raw.githubusercontent.com/kylebutts/ContinuousRD/main/inst/example-identifcation.png" width="100%"/>
<p>A visual example using a made-up DGP similar to the paper’s main example
is shown here for a given quantile <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>=</mo><mn>0.1</mn></mrow><annotation encoding="application/x-tex">u = 0.1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0.1</span></span></span></span></span>. The left-figure shows the
estimated jump in <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span>. The right-figure shows the estimated jump in <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span></span></span></span></span>
at value of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>q</mi><mo>−</mo></msup><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q^-(u)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0213em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span></span></span></span></span> and <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>q</mi><mo>+</mo></msup><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q^+(u)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0213em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span></span></span></span></span>. The ratio of these two estimates
would be the estimated treatment effect and can be interpreted as the
jump in <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span></span></span></span></span> per unit increase in <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span></span>.</p>
<h2 id="example">Example</h2>
<p>I will use a set of simulated data as an illustration of the method</p>
<pre class="shiki github-dark" style="background-color:#0d1117;color:#c9d1d9"><div class="language-id">r</div><div class="code-container"><code><div class="line"><span style="color:#79C0FF">library</span><span style="color:#C9D1D9">(ContinuousRD)</span></div><div class="line"><span style="color:#8B949E">#&gt; Loading required package: data.table</span></div><div class="line"><span style="color:#8B949E"># Load data</span></div><div class="line"><span style="color:#79C0FF">data</span><span style="color:#C9D1D9">(sim_data)</span></div><div class="line"></div><div class="line"><span style="color:#79C0FF">head</span><span style="color:#C9D1D9">(sim_data)</span></div><div class="line"><span style="color:#8B949E">#&gt; Key: &lt;id&gt;</span></div><div class="line"><span style="color:#8B949E">#&gt;       id         u           R     Z         T         Y</span></div><div class="line"><span style="color:#8B949E">#&gt;    &lt;int&gt;     &lt;num&gt;       &lt;num&gt; &lt;num&gt;     &lt;num&gt;     &lt;num&gt;</span></div><div class="line"><span style="color:#8B949E">#&gt; 1:     1 0.2002145 -0.71892650     0 0.6673815 0.6652777</span></div><div class="line"><span style="color:#8B949E">#&gt; 2:     2 0.6852186  0.19781138     1 1.3139139 1.3141626</span></div><div class="line"><span style="color:#8B949E">#&gt; 3:     3 0.9168758  0.03111523     1 1.4876568 1.4881608</span></div><div class="line"><span style="color:#8B949E">#&gt; 4:     4 0.2843995  0.64044390     1 1.0132996 1.0165819</span></div><div class="line"><span style="color:#8B949E">#&gt; 5:     5 0.1046501 -0.75736198     0 0.3488338 0.3474286</span></div><div class="line"><span style="color:#8B949E">#&gt; 6:     6 0.7010575  0.06593254     1 1.3257931 1.3291840</span></div></code></div></pre>
<p>The data consists of 10000 observations each of which is a unique unit.
The variable <code>Y</code> is the outcome variable, <code>T</code> is the continuous
treatment of interest, <code>R</code> is the running variable with a cutoff of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span></span>.
Positive values of the running variable are affected by the border, in
this case a binding lower bound on <code>T</code>. The variable <code>u</code> is the
(typically unobserved) percentile of each unit for the variable <code>T</code>.</p>
<p>The below data shows the observed continuous treatment along the running
variable. The color of the dot represents the quantile of <code>T</code> at that
value of <code>R</code>. You can see a clear jump at the border where <code>T</code> is
affected by the binding constraint.</p>
<pre class="shiki github-dark" style="background-color:#0d1117;color:#c9d1d9"><div class="language-id">r</div><div class="code-container"><code><div class="line"><span style="color:#79C0FF">library</span><span style="color:#C9D1D9">(ggplot2)</span></div><div class="line"><span style="color:#FFA657">ggplot</span><span style="color:#C9D1D9">(sim_data) </span><span style="color:#FF7B72">+</span></div><div class="line"><span style="color:#C9D1D9">    </span><span style="color:#FFA657">geom_point</span><span style="color:#C9D1D9">(</span></div><div class="line"><span style="color:#C9D1D9">        </span><span style="color:#FFA657">aes</span><span style="color:#C9D1D9">(</span><span style="color:#FFA657">x</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> R, </span><span style="color:#FFA657">y</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> T, </span><span style="color:#FFA657">color</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> u),</span></div><div class="line"><span style="color:#C9D1D9">        </span><span style="color:#FFA657">alpha</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#79C0FF">0.4</span></div><div class="line"><span style="color:#C9D1D9">    ) </span><span style="color:#FF7B72">+</span><span style="color:#C9D1D9"> </span></div><div class="line"><span style="color:#C9D1D9">    </span><span style="color:#FFA657">geom_vline</span><span style="color:#C9D1D9">(</span><span style="color:#FFA657">xintercept</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#79C0FF">0</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">color</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#A5D6FF">&quot;red&quot;</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">+</span></div><div class="line"><span style="color:#C9D1D9">    </span><span style="color:#FFA657">labs</span><span style="color:#C9D1D9">(</span></div><div class="line"><span style="color:#C9D1D9">        </span><span style="color:#FFA657">x</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#A5D6FF">&quot;Running Variable&quot;</span><span style="color:#C9D1D9">,</span></div><div class="line"><span style="color:#C9D1D9">        </span><span style="color:#FFA657">y</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#A5D6FF">&quot;Continuous Treatment&quot;</span></div><div class="line"><span style="color:#C9D1D9">    ) </span><span style="color:#FF7B72">+</span></div><div class="line"><span style="color:#C9D1D9">    </span><span style="color:#FFA657">theme_minimal</span><span style="color:#C9D1D9">()</span></div></code></div></pre>
<img src="https://raw.githubusercontent.com/kylebutts/ContinuousRD/main/man/figures/README-plot-continuous-treatment-1.png" width="100%"/>
<p>However, this is only binding for units at the lower end of the
distribution. To see this more clearly, let’s look at multiple RDs at
different quantiles of <code>T</code>.</p>
<pre class="shiki github-dark" style="background-color:#0d1117;color:#c9d1d9"><div class="language-id">r</div><div class="code-container"><code><div class="line"><span style="color:#79C0FF">library</span><span style="color:#C9D1D9">(rdrobust)</span></div><div class="line"></div><div class="line"><span style="color:#FFA657">low_q</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> sim_data[sim_data</span><span style="color:#FF7B72">$</span><span style="color:#C9D1D9">u </span><span style="color:#FF7B72">&gt;</span><span style="color:#C9D1D9"> </span><span style="color:#79C0FF">0</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">&amp;</span><span style="color:#C9D1D9"> sim_data</span><span style="color:#FF7B72">$</span><span style="color:#C9D1D9">u </span><span style="color:#FF7B72">&lt;</span><span style="color:#C9D1D9"> </span><span style="color:#79C0FF">0.2</span><span style="color:#C9D1D9">,]</span></div><div class="line"><span style="color:#FFA657">high_q</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> sim_data[sim_data</span><span style="color:#FF7B72">$</span><span style="color:#C9D1D9">u </span><span style="color:#FF7B72">&gt;</span><span style="color:#C9D1D9"> </span><span style="color:#79C0FF">0.5</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">&amp;</span><span style="color:#C9D1D9"> sim_data</span><span style="color:#FF7B72">$</span><span style="color:#C9D1D9">R </span><span style="color:#FF7B72">&lt;</span><span style="color:#C9D1D9"> </span><span style="color:#79C0FF">0.7</span><span style="color:#C9D1D9">,]</span></div><div class="line"></div><div class="line"><span style="color:#79C0FF">rdrobust</span><span style="color:#FF7B72">::</span><span style="color:#FFA657">rdplot</span><span style="color:#C9D1D9">(</span></div><div class="line"><span style="color:#C9D1D9">    </span><span style="color:#FFA657">y</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> low_q</span><span style="color:#FF7B72">$</span><span style="color:#C9D1D9">T, </span><span style="color:#FFA657">x</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> low_q</span><span style="color:#FF7B72">$</span><span style="color:#C9D1D9">R, </span></div><div class="line"><span style="color:#C9D1D9">    </span><span style="color:#FFA657">title</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#A5D6FF">&quot;Low quantile of T&quot;</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">y.label</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#A5D6FF">&quot;Continuous Treatment&quot;</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">x.label</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#A5D6FF">&quot;Running Variable&quot;</span></div><div class="line"><span style="color:#C9D1D9">)</span></div></code></div></pre>
<img src="https://raw.githubusercontent.com/kylebutts/ContinuousRD/main/man/figures/README-quatnile-RDs-1.png" width="100%"/>
<pre class="shiki github-dark" style="background-color:#0d1117;color:#c9d1d9"><div class="language-id">r</div><div class="code-container"><code><div class="line"><span style="color:#79C0FF">rdrobust</span><span style="color:#FF7B72">::</span><span style="color:#FFA657">rdplot</span><span style="color:#C9D1D9">(</span></div><div class="line"><span style="color:#C9D1D9">    </span><span style="color:#FFA657">y</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> high_q</span><span style="color:#FF7B72">$</span><span style="color:#C9D1D9">T, </span><span style="color:#FFA657">x</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> high_q</span><span style="color:#FF7B72">$</span><span style="color:#C9D1D9">R, </span></div><div class="line"><span style="color:#C9D1D9">    </span><span style="color:#FFA657">title</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#A5D6FF">&quot;High quantile of T&quot;</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">y.label</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#A5D6FF">&quot;Continuous Treatment&quot;</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">x.label</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#A5D6FF">&quot;Running Variable&quot;</span></div><div class="line"><span style="color:#C9D1D9">)</span></div></code></div></pre>
<img src="https://raw.githubusercontent.com/kylebutts/ContinuousRD/main/man/figures/README-quatnile-RDs-2.png" width="100%"/>
<p>The data is simulated to have units with quantile below <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.3</mn></mrow><annotation encoding="application/x-tex">0.3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0.3</span></span></span></span></span> be
affected by the cutoff (the magnitude of the change in <code>T</code> depends on
quantile <code>u</code>) and those units experience a treatment effect of size <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span>.
Let’s see if we get that using the <code>QLATE_bc_se</code> function:</p>
<pre class="shiki github-dark" style="background-color:#0d1117;color:#c9d1d9"><div class="language-id">r</div><div class="code-container"><code><div class="line"><span style="color:#C9D1D9">res </span><span style="color:#FF7B72">&lt;-</span><span style="color:#C9D1D9"> </span><span style="color:#79C0FF">ContinuousRD</span><span style="color:#FF7B72">::</span><span style="color:#FFA657">QLATE_bc_se</span><span style="color:#C9D1D9">(sim_data, </span><span style="color:#FFA657">qlist</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#79C0FF">seq</span><span style="color:#C9D1D9">(</span><span style="color:#79C0FF">0.1</span><span style="color:#C9D1D9">, </span><span style="color:#79C0FF">0.9</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">by</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#79C0FF">0.1</span><span style="color:#C9D1D9">), </span><span style="color:#FFA657">yname</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#A5D6FF">&quot;Y&quot;</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">tname</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#A5D6FF">&quot;T&quot;</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">rname</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#A5D6FF">&quot;R&quot;</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">c</span><span style="color:#C9D1D9"> </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> </span><span style="color:#79C0FF">0</span><span style="color:#C9D1D9">)</span></div><div class="line"><span style="color:#8B949E">#&gt; `qlist`: 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, and 0.9</span></div><div class="line"><span style="color:#8B949E">#&gt; `tau_u`: 1, 1.001, NA, NA, NA, NA, NA, NA, and NA</span></div><div class="line"><span style="color:#8B949E">#&gt; `SEtau`: 0.005, 0.018, NA, NA, NA, NA, NA, NA, and NA</span></div><div class="line"><span style="color:#8B949E">#&gt; `tau_u_bc`: 0.992, 0.985, NA, NA, NA, NA, NA, NA, and NA</span></div><div class="line"><span style="color:#8B949E">#&gt; `SEtau_bc`: 2.384, 7.942, NA, NA, NA, NA, NA, NA, and NA</span></div><div class="line"><span style="color:#8B949E">#&gt; `pi`: 1.001</span></div><div class="line"><span style="color:#8B949E">#&gt; `SEpi`: 0.004</span></div><div class="line"><span style="color:#8B949E">#&gt; `pi_bc`: 0.991</span></div><div class="line"><span style="color:#8B949E">#&gt; `SEpi_bc`: 0.359</span></div></code></div></pre>
<p>In the printed results a value of <code>NA</code> appears when no significant jump
in the treatment variable is found at the cutoff. In this case, since
the jump around the 30th percentile is near zero, it doesn’t show up in
the estimate. However, we see there the effect is around <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span> as expected
for the 10th and 20th percentile. The overall average effect <code>pi</code> is
also approximately <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span> as well.</p>
</div>
    </div>
  </div>

  <!-- Katex for equations -->
  
</body>

</html>